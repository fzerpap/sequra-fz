  [1m[35m (301.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "sequra_fz_test"[0m
  [1m[35m (1392.6ms)[0m  [1m[35mCREATE DATABASE "sequra_fz_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (2.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "disburses" CASCADE[0m
  [1m[35m (84.3ms)[0m  [1m[35mCREATE TABLE "disburses" ("id" bigserial primary key, "init_date" timestamp(6), "end_date" timestamp(6), "orders" integer, "amount" decimal(12,2) DEFAULT 0.0, "merchant_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "feed" decimal(12,2) DEFAULT 0.0)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE INDEX "index_disburses_on_merchant_id" ON "disburses" ("merchant_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "merchants" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "merchants" ("id" bigserial primary key, "name" character varying, "email" character varying, "cif" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "amount" decimal(12,2) DEFAULT 0.0, "completed_at" timestamp(6), "shopper_id" bigint NOT NULL, "merchant_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE INDEX "index_orders_on_merchant_id" ON "orders" ("merchant_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE INDEX "index_orders_on_shopper_id" ON "orders" ("shopper_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "shoppers" CASCADE[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "shoppers" ("id" bigserial primary key, "name" character varying, "email" character varying, "nif" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (10.9ms)[0m  [1m[35mALTER TABLE "disburses" ADD CONSTRAINT "fk_rails_e11bf5aa87"
FOREIGN KEY ("merchant_id")
  REFERENCES "merchants" ("id")
[0m
  [1m[35m (4.4ms)[0m  [1m[35mALTER TABLE "orders" ADD CONSTRAINT "fk_rails_412cc65b8b"
FOREIGN KEY ("merchant_id")
  REFERENCES "merchants" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "orders" ADD CONSTRAINT "fk_rails_dc5fd7650e"
FOREIGN KEY ("shopper_id")
  REFERENCES "shoppers" ("id")
[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220513001604)[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220512194735),
(20220512194907),
(20220512195328),
(20220512203558);

[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2022-05-13 12:14:36.237511"], ["updated_at", "2022-05-13 12:14:36.237511"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "b6ebea377cbb37cb74e12dddc7ea99bc9c7f5643"], ["created_at", "2022-05-13 12:14:36.248909"], ["updated_at", "2022-05-13 12:14:36.248909"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:11.640258', '2022-05-13 12:25:11.640258', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:11.640258', '2022-05-13 12:25:11.640258', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.655104', '2022-05-13 12:25:11.655104'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.655104', '2022-05-13 12:25:11.655104');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:11.657741', '2022-05-13 12:25:11.657741');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.666092', '2022-05-13 12:25:11.666092'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.666092', '2022-05-13 12:25:11.666092')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (50.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:11.774583', '2022-05-13 12:25:11.774583', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:11.774583', '2022-05-13 12:25:11.774583', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.774691', '2022-05-13 12:25:11.774691'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.774691', '2022-05-13 12:25:11.774691');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:11.774730', '2022-05-13 12:25:11.774730');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.774898', '2022-05-13 12:25:11.774898'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:11.774898', '2022-05-13 12:25:11.774898')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.124914', '2022-05-13 12:25:12.124914', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.124914', '2022-05-13 12:25:12.124914', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.125080', '2022-05-13 12:25:12.125080'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.125080', '2022-05-13 12:25:12.125080');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.125194', '2022-05-13 12:25:12.125194');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.125493', '2022-05-13 12:25:12.125493'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.125493', '2022-05-13 12:25:12.125493')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.184568', '2022-05-13 12:25:12.184568', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.184568', '2022-05-13 12:25:12.184568', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.184662', '2022-05-13 12:25:12.184662'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.184662', '2022-05-13 12:25:12.184662');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.184702', '2022-05-13 12:25:12.184702');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.184835', '2022-05-13 12:25:12.184835'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.184835', '2022-05-13 12:25:12.184835')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.240629', '2022-05-13 12:25:12.240629', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.240629', '2022-05-13 12:25:12.240629', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.240939', '2022-05-13 12:25:12.240939'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.240939', '2022-05-13 12:25:12.240939');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.241076', '2022-05-13 12:25:12.241076');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.241570', '2022-05-13 12:25:12.241570'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.241570', '2022-05-13 12:25:12.241570')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.299228', '2022-05-13 12:25:12.299228', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.299228', '2022-05-13 12:25:12.299228', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.299344', '2022-05-13 12:25:12.299344'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.299344', '2022-05-13 12:25:12.299344');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.299410', '2022-05-13 12:25:12.299410');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.299602', '2022-05-13 12:25:12.299602'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.299602', '2022-05-13 12:25:12.299602')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.354009', '2022-05-13 12:25:12.354009', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.354009', '2022-05-13 12:25:12.354009', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.354111', '2022-05-13 12:25:12.354111'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.354111', '2022-05-13 12:25:12.354111');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.354156', '2022-05-13 12:25:12.354156');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.354312', '2022-05-13 12:25:12.354312'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.354312', '2022-05-13 12:25:12.354312')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.410548', '2022-05-13 12:25:12.410548', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.410548', '2022-05-13 12:25:12.410548', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.410655', '2022-05-13 12:25:12.410655'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.410655', '2022-05-13 12:25:12.410655');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.410705', '2022-05-13 12:25:12.410705');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.411038', '2022-05-13 12:25:12.411038'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.411038', '2022-05-13 12:25:12.411038')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.464316', '2022-05-13 12:25:12.464316', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.464316', '2022-05-13 12:25:12.464316', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.464435', '2022-05-13 12:25:12.464435'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.464435', '2022-05-13 12:25:12.464435');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.464542', '2022-05-13 12:25:12.464542');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.464787', '2022-05-13 12:25:12.464787'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.464787', '2022-05-13 12:25:12.464787')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.521487', '2022-05-13 12:25:12.521487', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.521487', '2022-05-13 12:25:12.521487', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.521606', '2022-05-13 12:25:12.521606'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.521606', '2022-05-13 12:25:12.521606');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.521657', '2022-05-13 12:25:12.521657');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.521816', '2022-05-13 12:25:12.521816'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.521816', '2022-05-13 12:25:12.521816')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.577570', '2022-05-13 12:25:12.577570', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.577570', '2022-05-13 12:25:12.577570', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.577676', '2022-05-13 12:25:12.577676'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.577676', '2022-05-13 12:25:12.577676');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.577724', '2022-05-13 12:25:12.577724');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.577882', '2022-05-13 12:25:12.577882'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.577882', '2022-05-13 12:25:12.577882')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.633875', '2022-05-13 12:25:12.633875', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.633875', '2022-05-13 12:25:12.633875', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.633971', '2022-05-13 12:25:12.633971'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.633971', '2022-05-13 12:25:12.633971');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.634013', '2022-05-13 12:25:12.634013');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.634164', '2022-05-13 12:25:12.634164'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.634164', '2022-05-13 12:25:12.634164')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.692628', '2022-05-13 12:25:12.692628', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.692628', '2022-05-13 12:25:12.692628', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.692741', '2022-05-13 12:25:12.692741'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.692741', '2022-05-13 12:25:12.692741');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.692793', '2022-05-13 12:25:12.692793');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.692955', '2022-05-13 12:25:12.692955'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.692955', '2022-05-13 12:25:12.692955')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.747575', '2022-05-13 12:25:12.747575', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.747575', '2022-05-13 12:25:12.747575', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.747680', '2022-05-13 12:25:12.747680'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.747680', '2022-05-13 12:25:12.747680');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.747724', '2022-05-13 12:25:12.747724');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.747860', '2022-05-13 12:25:12.747860'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.747860', '2022-05-13 12:25:12.747860')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.799794', '2022-05-13 12:25:12.799794', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.799794', '2022-05-13 12:25:12.799794', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.799918', '2022-05-13 12:25:12.799918'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.799918', '2022-05-13 12:25:12.799918');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.799972', '2022-05-13 12:25:12.799972');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.800140', '2022-05-13 12:25:12.800140'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.800140', '2022-05-13 12:25:12.800140')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.854379', '2022-05-13 12:25:12.854379', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.854379', '2022-05-13 12:25:12.854379', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.854492', '2022-05-13 12:25:12.854492'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.854492', '2022-05-13 12:25:12.854492');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.854542', '2022-05-13 12:25:12.854542');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.854702', '2022-05-13 12:25:12.854702'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.854702', '2022-05-13 12:25:12.854702')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.906773', '2022-05-13 12:25:12.906773', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.906773', '2022-05-13 12:25:12.906773', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.906865', '2022-05-13 12:25:12.906865'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.906865', '2022-05-13 12:25:12.906865');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.906905', '2022-05-13 12:25:12.906905');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.907037', '2022-05-13 12:25:12.907037'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.907037', '2022-05-13 12:25:12.907037')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:12.959971', '2022-05-13 12:25:12.959971', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:12.959971', '2022-05-13 12:25:12.959971', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.960086', '2022-05-13 12:25:12.960086'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.960086', '2022-05-13 12:25:12.960086');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:12.960133', '2022-05-13 12:25:12.960133');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.960286', '2022-05-13 12:25:12.960286'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:12.960286', '2022-05-13 12:25:12.960286')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:13.012540', '2022-05-13 12:25:13.012540', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:13.012540', '2022-05-13 12:25:13.012540', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.012643', '2022-05-13 12:25:13.012643'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.012643', '2022-05-13 12:25:13.012643');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.012687', '2022-05-13 12:25:13.012687');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.012828', '2022-05-13 12:25:13.012828'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.012828', '2022-05-13 12:25:13.012828')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:13.062827', '2022-05-13 12:25:13.062827', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:13.062827', '2022-05-13 12:25:13.062827', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.062923', '2022-05-13 12:25:13.062923'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.062923', '2022-05-13 12:25:13.062923');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.062965', '2022-05-13 12:25:13.062965');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.063145', '2022-05-13 12:25:13.063145'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.063145', '2022-05-13 12:25:13.063145')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:13.117861', '2022-05-13 12:25:13.117861', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:13.117861', '2022-05-13 12:25:13.117861', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.118020', '2022-05-13 12:25:13.118020'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.118020', '2022-05-13 12:25:13.118020');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:13.118071', '2022-05-13 12:25:13.118071');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.118233', '2022-05-13 12:25:13.118233'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:13.118233', '2022-05-13 12:25:13.118233')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.057511', '2022-05-13 12:25:48.057511', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.057511', '2022-05-13 12:25:48.057511', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.072266', '2022-05-13 12:25:48.072266'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.072266', '2022-05-13 12:25:48.072266');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.074739', '2022-05-13 12:25:48.074739');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.083006', '2022-05-13 12:25:48.083006'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.083006', '2022-05-13 12:25:48.083006')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.419225', '2022-05-13 12:25:48.419225', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.419225', '2022-05-13 12:25:48.419225', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.419337', '2022-05-13 12:25:48.419337'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.419337', '2022-05-13 12:25:48.419337');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.419396', '2022-05-13 12:25:48.419396');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.419553', '2022-05-13 12:25:48.419553'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.419553', '2022-05-13 12:25:48.419553')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.491010', '2022-05-13 12:25:48.491010', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.491010', '2022-05-13 12:25:48.491010', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.491127', '2022-05-13 12:25:48.491127'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.491127', '2022-05-13 12:25:48.491127');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.491176', '2022-05-13 12:25:48.491176');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.491360', '2022-05-13 12:25:48.491360'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.491360', '2022-05-13 12:25:48.491360')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.548077', '2022-05-13 12:25:48.548077', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.548077', '2022-05-13 12:25:48.548077', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.548193', '2022-05-13 12:25:48.548193'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.548193', '2022-05-13 12:25:48.548193');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.548243', '2022-05-13 12:25:48.548243');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.548409', '2022-05-13 12:25:48.548409'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.548409', '2022-05-13 12:25:48.548409')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.602654', '2022-05-13 12:25:48.602654', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.602654', '2022-05-13 12:25:48.602654', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.602746', '2022-05-13 12:25:48.602746'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.602746', '2022-05-13 12:25:48.602746');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.602787', '2022-05-13 12:25:48.602787');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.602923', '2022-05-13 12:25:48.602923'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.602923', '2022-05-13 12:25:48.602923')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.670693', '2022-05-13 12:25:48.670693', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.670693', '2022-05-13 12:25:48.670693', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.670795', '2022-05-13 12:25:48.670795'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.670795', '2022-05-13 12:25:48.670795');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.670843', '2022-05-13 12:25:48.670843');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.670988', '2022-05-13 12:25:48.670988'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.670988', '2022-05-13 12:25:48.670988')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.725751', '2022-05-13 12:25:48.725751', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.725751', '2022-05-13 12:25:48.725751', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.726097', '2022-05-13 12:25:48.726097'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.726097', '2022-05-13 12:25:48.726097');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.726213', '2022-05-13 12:25:48.726213');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.726967', '2022-05-13 12:25:48.726967'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.726967', '2022-05-13 12:25:48.726967')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.782522', '2022-05-13 12:25:48.782522', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.782522', '2022-05-13 12:25:48.782522', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.782617', '2022-05-13 12:25:48.782617'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.782617', '2022-05-13 12:25:48.782617');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.782675', '2022-05-13 12:25:48.782675');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.782813', '2022-05-13 12:25:48.782813'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.782813', '2022-05-13 12:25:48.782813')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.839309', '2022-05-13 12:25:48.839309', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.839309', '2022-05-13 12:25:48.839309', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.839423', '2022-05-13 12:25:48.839423'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.839423', '2022-05-13 12:25:48.839423');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.839471', '2022-05-13 12:25:48.839471');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.839609', '2022-05-13 12:25:48.839609'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.839609', '2022-05-13 12:25:48.839609')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.896358', '2022-05-13 12:25:48.896358', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.896358', '2022-05-13 12:25:48.896358', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.896486', '2022-05-13 12:25:48.896486'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.896486', '2022-05-13 12:25:48.896486');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.896555', '2022-05-13 12:25:48.896555');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.896833', '2022-05-13 12:25:48.896833'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.896833', '2022-05-13 12:25:48.896833')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:48.955824', '2022-05-13 12:25:48.955824', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:48.955824', '2022-05-13 12:25:48.955824', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.955961', '2022-05-13 12:25:48.955961'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.955961', '2022-05-13 12:25:48.955961');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:48.956036', '2022-05-13 12:25:48.956036');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.956380', '2022-05-13 12:25:48.956380'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:48.956380', '2022-05-13 12:25:48.956380')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.016628', '2022-05-13 12:25:49.016628', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.016628', '2022-05-13 12:25:49.016628', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.016736', '2022-05-13 12:25:49.016736'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.016736', '2022-05-13 12:25:49.016736');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.016785', '2022-05-13 12:25:49.016785');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.016933', '2022-05-13 12:25:49.016933'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.016933', '2022-05-13 12:25:49.016933')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.074628', '2022-05-13 12:25:49.074628', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.074628', '2022-05-13 12:25:49.074628', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.074735', '2022-05-13 12:25:49.074735'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.074735', '2022-05-13 12:25:49.074735');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.074783', '2022-05-13 12:25:49.074783');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.074931', '2022-05-13 12:25:49.074931'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.074931', '2022-05-13 12:25:49.074931')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.134336', '2022-05-13 12:25:49.134336', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.134336', '2022-05-13 12:25:49.134336', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.134551', '2022-05-13 12:25:49.134551'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.134551', '2022-05-13 12:25:49.134551');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.134619', '2022-05-13 12:25:49.134619');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.134763', '2022-05-13 12:25:49.134763'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.134763', '2022-05-13 12:25:49.134763')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.189007', '2022-05-13 12:25:49.189007', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.189007', '2022-05-13 12:25:49.189007', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.189118', '2022-05-13 12:25:49.189118'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.189118', '2022-05-13 12:25:49.189118');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.189166', '2022-05-13 12:25:49.189166');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.189313', '2022-05-13 12:25:49.189313'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.189313', '2022-05-13 12:25:49.189313')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.247145', '2022-05-13 12:25:49.247145', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.247145', '2022-05-13 12:25:49.247145', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.247239', '2022-05-13 12:25:49.247239'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.247239', '2022-05-13 12:25:49.247239');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.247279', '2022-05-13 12:25:49.247279');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.247411', '2022-05-13 12:25:49.247411'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.247411', '2022-05-13 12:25:49.247411')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.308033', '2022-05-13 12:25:49.308033', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.308033', '2022-05-13 12:25:49.308033', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.308179', '2022-05-13 12:25:49.308179'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.308179', '2022-05-13 12:25:49.308179');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.308253', '2022-05-13 12:25:49.308253');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.308531', '2022-05-13 12:25:49.308531'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.308531', '2022-05-13 12:25:49.308531')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.366257', '2022-05-13 12:25:49.366257', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.366257', '2022-05-13 12:25:49.366257', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.366401', '2022-05-13 12:25:49.366401'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.366401', '2022-05-13 12:25:49.366401');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.366477', '2022-05-13 12:25:49.366477');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.366772', '2022-05-13 12:25:49.366772'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.366772', '2022-05-13 12:25:49.366772')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.426171', '2022-05-13 12:25:49.426171', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.426171', '2022-05-13 12:25:49.426171', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.426391', '2022-05-13 12:25:49.426391'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.426391', '2022-05-13 12:25:49.426391');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.426549', '2022-05-13 12:25:49.426549');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.426870', '2022-05-13 12:25:49.426870'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.426870', '2022-05-13 12:25:49.426870')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.486539', '2022-05-13 12:25:49.486539', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.486539', '2022-05-13 12:25:49.486539', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.486682', '2022-05-13 12:25:49.486682'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.486682', '2022-05-13 12:25:49.486682');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.486737', '2022-05-13 12:25:49.486737');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.486886', '2022-05-13 12:25:49.486886'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.486886', '2022-05-13 12:25:49.486886')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:25:49.545895', '2022-05-13 12:25:49.545895', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:25:49.545895', '2022-05-13 12:25:49.545895', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.545999', '2022-05-13 12:25:49.545999'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.545999', '2022-05-13 12:25:49.545999');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:25:49.546046', '2022-05-13 12:25:49.546046');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.546193', '2022-05-13 12:25:49.546193'), (298486374, 'MyString', 'MyString', 'MyString', '2022-05-13 12:25:49.546193', '2022-05-13 12:25:49.546193')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:08.409194', '2022-05-13 12:27:08.409194', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:08.409194', '2022-05-13 12:27:08.409194', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.423940', '2022-05-13 12:27:08.423940'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.423940', '2022-05-13 12:27:08.423940');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.426803', '2022-05-13 12:27:08.426803');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.435365', '2022-05-13 12:27:08.435365'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.435365', '2022-05-13 12:27:08.435365')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:08.502821', '2022-05-13 12:27:08.502821', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:08.502821', '2022-05-13 12:27:08.502821', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.502931', '2022-05-13 12:27:08.502931'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.502931', '2022-05-13 12:27:08.502931');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.502979', '2022-05-13 12:27:08.502979');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.503132', '2022-05-13 12:27:08.503132'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.503132', '2022-05-13 12:27:08.503132')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:08.852991', '2022-05-13 12:27:08.852991', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:08.852991', '2022-05-13 12:27:08.852991', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.853092', '2022-05-13 12:27:08.853092'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.853092', '2022-05-13 12:27:08.853092');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.853131', '2022-05-13 12:27:08.853131');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.853255', '2022-05-13 12:27:08.853255'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.853255', '2022-05-13 12:27:08.853255')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:08.913000', '2022-05-13 12:27:08.913000', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:08.913000', '2022-05-13 12:27:08.913000', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.913125', '2022-05-13 12:27:08.913125'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.913125', '2022-05-13 12:27:08.913125');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.913175', '2022-05-13 12:27:08.913175');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.913329', '2022-05-13 12:27:08.913329'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.913329', '2022-05-13 12:27:08.913329')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:08.974523', '2022-05-13 12:27:08.974523', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:08.974523', '2022-05-13 12:27:08.974523', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.974657', '2022-05-13 12:27:08.974657'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.974657', '2022-05-13 12:27:08.974657');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:08.974708', '2022-05-13 12:27:08.974708');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.975093', '2022-05-13 12:27:08.975093'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:08.975093', '2022-05-13 12:27:08.975093')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.036500', '2022-05-13 12:27:09.036500', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.036500', '2022-05-13 12:27:09.036500', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.036590', '2022-05-13 12:27:09.036590'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.036590', '2022-05-13 12:27:09.036590');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.036629', '2022-05-13 12:27:09.036629');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.036754', '2022-05-13 12:27:09.036754'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.036754', '2022-05-13 12:27:09.036754')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.097341', '2022-05-13 12:27:09.097341', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.097341', '2022-05-13 12:27:09.097341', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.097481', '2022-05-13 12:27:09.097481'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.097481', '2022-05-13 12:27:09.097481');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.097560', '2022-05-13 12:27:09.097560');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.097825', '2022-05-13 12:27:09.097825'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.097825', '2022-05-13 12:27:09.097825')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.156024', '2022-05-13 12:27:09.156024', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.156024', '2022-05-13 12:27:09.156024', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.156138', '2022-05-13 12:27:09.156138'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.156138', '2022-05-13 12:27:09.156138');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.156186', '2022-05-13 12:27:09.156186');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.156348', '2022-05-13 12:27:09.156348'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.156348', '2022-05-13 12:27:09.156348')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.216339', '2022-05-13 12:27:09.216339', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.216339', '2022-05-13 12:27:09.216339', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.216484', '2022-05-13 12:27:09.216484'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.216484', '2022-05-13 12:27:09.216484');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.216575', '2022-05-13 12:27:09.216575');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.216780', '2022-05-13 12:27:09.216780'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.216780', '2022-05-13 12:27:09.216780')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.272552', '2022-05-13 12:27:09.272552', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.272552', '2022-05-13 12:27:09.272552', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.272662', '2022-05-13 12:27:09.272662'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.272662', '2022-05-13 12:27:09.272662');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.272712', '2022-05-13 12:27:09.272712');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.272880', '2022-05-13 12:27:09.272880'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.272880', '2022-05-13 12:27:09.272880')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.332051', '2022-05-13 12:27:09.332051', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.332051', '2022-05-13 12:27:09.332051', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.332276', '2022-05-13 12:27:09.332276'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.332276', '2022-05-13 12:27:09.332276');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.332440', '2022-05-13 12:27:09.332440');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.332938', '2022-05-13 12:27:09.332938'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.332938', '2022-05-13 12:27:09.332938')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.394358', '2022-05-13 12:27:09.394358', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.394358', '2022-05-13 12:27:09.394358', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.394467', '2022-05-13 12:27:09.394467'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.394467', '2022-05-13 12:27:09.394467');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.394514', '2022-05-13 12:27:09.394514');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.394660', '2022-05-13 12:27:09.394660'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.394660', '2022-05-13 12:27:09.394660')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.453792', '2022-05-13 12:27:09.453792', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.453792', '2022-05-13 12:27:09.453792', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.453902', '2022-05-13 12:27:09.453902'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.453902', '2022-05-13 12:27:09.453902');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.453951', '2022-05-13 12:27:09.453951');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.454096', '2022-05-13 12:27:09.454096'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.454096', '2022-05-13 12:27:09.454096')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.513827', '2022-05-13 12:27:09.513827', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.513827', '2022-05-13 12:27:09.513827', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.513933', '2022-05-13 12:27:09.513933'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.513933', '2022-05-13 12:27:09.513933');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.513981', '2022-05-13 12:27:09.513981');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.514145', '2022-05-13 12:27:09.514145'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.514145', '2022-05-13 12:27:09.514145')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.570381', '2022-05-13 12:27:09.570381', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.570381', '2022-05-13 12:27:09.570381', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.570492', '2022-05-13 12:27:09.570492'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.570492', '2022-05-13 12:27:09.570492');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.570543', '2022-05-13 12:27:09.570543');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.570705', '2022-05-13 12:27:09.570705'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.570705', '2022-05-13 12:27:09.570705')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.626811', '2022-05-13 12:27:09.626811', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.626811', '2022-05-13 12:27:09.626811', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.626919', '2022-05-13 12:27:09.626919'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.626919', '2022-05-13 12:27:09.626919');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.626965', '2022-05-13 12:27:09.626965');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.627105', '2022-05-13 12:27:09.627105'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.627105', '2022-05-13 12:27:09.627105')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.682517', '2022-05-13 12:27:09.682517', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.682517', '2022-05-13 12:27:09.682517', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.682774', '2022-05-13 12:27:09.682774'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.682774', '2022-05-13 12:27:09.682774');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.682910', '2022-05-13 12:27:09.682910');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.683425', '2022-05-13 12:27:09.683425'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.683425', '2022-05-13 12:27:09.683425')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.741139', '2022-05-13 12:27:09.741139', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.741139', '2022-05-13 12:27:09.741139', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.741256', '2022-05-13 12:27:09.741256'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.741256', '2022-05-13 12:27:09.741256');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.741310', '2022-05-13 12:27:09.741310');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.741511', '2022-05-13 12:27:09.741511'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.741511', '2022-05-13 12:27:09.741511')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.802369', '2022-05-13 12:27:09.802369', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.802369', '2022-05-13 12:27:09.802369', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.802487', '2022-05-13 12:27:09.802487'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.802487', '2022-05-13 12:27:09.802487');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.802535', '2022-05-13 12:27:09.802535');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.802693', '2022-05-13 12:27:09.802693'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.802693', '2022-05-13 12:27:09.802693')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.860737', '2022-05-13 12:27:09.860737', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.860737', '2022-05-13 12:27:09.860737', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.860859', '2022-05-13 12:27:09.860859'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.860859', '2022-05-13 12:27:09.860859');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.860912', '2022-05-13 12:27:09.860912');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.861087', '2022-05-13 12:27:09.861087'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.861087', '2022-05-13 12:27:09.861087')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:27:09.919746', '2022-05-13 12:27:09.919746', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:27:09.919746', '2022-05-13 12:27:09.919746', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.919856', '2022-05-13 12:27:09.919856'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.919856', '2022-05-13 12:27:09.919856');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:27:09.919904', '2022-05-13 12:27:09.919904');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.920054', '2022-05-13 12:27:09.920054'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:27:09.920054', '2022-05-13 12:27:09.920054')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (371.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "sequra_fz_test"[0m
  [1m[35m (1167.1ms)[0m  [1m[35mCREATE DATABASE "sequra_fz_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (3.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "disburses" CASCADE[0m
  [1m[35m (50.1ms)[0m  [1m[35mCREATE TABLE "disburses" ("id" bigserial primary key, "init_date" timestamp(6), "end_date" timestamp(6), "orders" integer, "amount" decimal(12,2) DEFAULT 0.0, "merchant_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "feed" decimal(12,2) DEFAULT 0.0)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE INDEX "index_disburses_on_merchant_id" ON "disburses" ("merchant_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "merchants" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "merchants" ("id" bigserial primary key, "name" character varying, "email" character varying, "cif" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "orders" ("id" bigserial primary key, "amount" decimal(12,2) DEFAULT 0.0, "completed_at" timestamp(6), "shopper_id" bigint NOT NULL, "merchant_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE INDEX "index_orders_on_merchant_id" ON "orders" ("merchant_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE INDEX "index_orders_on_shopper_id" ON "orders" ("shopper_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "shoppers" CASCADE[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE "shoppers" ("id" bigserial primary key, "name" character varying, "email" character varying, "nif" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (9.1ms)[0m  [1m[35mALTER TABLE "disburses" ADD CONSTRAINT "fk_rails_e11bf5aa87"
FOREIGN KEY ("merchant_id")
  REFERENCES "merchants" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "orders" ADD CONSTRAINT "fk_rails_412cc65b8b"
FOREIGN KEY ("merchant_id")
  REFERENCES "merchants" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "orders" ADD CONSTRAINT "fk_rails_dc5fd7650e"
FOREIGN KEY ("shopper_id")
  REFERENCES "shoppers" ("id")
[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20220513001604)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20220512194735),
(20220512194907),
(20220512195328),
(20220512203558);

[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2022-05-13 12:31:32.696187"], ["updated_at", "2022-05-13 12:31:32.696187"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "b6ebea377cbb37cb74e12dddc7ea99bc9c7f5643"], ["created_at", "2022-05-13 12:31:32.706106"], ["updated_at", "2022-05-13 12:31:32.706106"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:32.972105', '2022-05-13 12:31:32.972105', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:32.972105', '2022-05-13 12:31:32.972105', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:32.986429', '2022-05-13 12:31:32.986429'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:32.986429', '2022-05-13 12:31:32.986429');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:32.988858', '2022-05-13 12:31:32.988858');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:32.997740', '2022-05-13 12:31:32.997740'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:32.997740', '2022-05-13 12:31:32.997740')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.351771', '2022-05-13 12:31:33.351771', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.351771', '2022-05-13 12:31:33.351771', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.351901', '2022-05-13 12:31:33.351901'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.351901', '2022-05-13 12:31:33.351901');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.351952', '2022-05-13 12:31:33.351952');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.352110', '2022-05-13 12:31:33.352110'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.352110', '2022-05-13 12:31:33.352110')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.409474', '2022-05-13 12:31:33.409474', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.409474', '2022-05-13 12:31:33.409474', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.409587', '2022-05-13 12:31:33.409587'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.409587', '2022-05-13 12:31:33.409587');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.409624', '2022-05-13 12:31:33.409624');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.409746', '2022-05-13 12:31:33.409746'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.409746', '2022-05-13 12:31:33.409746')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.467415', '2022-05-13 12:31:33.467415', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.467415', '2022-05-13 12:31:33.467415', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.467516', '2022-05-13 12:31:33.467516'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.467516', '2022-05-13 12:31:33.467516');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.467556', '2022-05-13 12:31:33.467556');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.467744', '2022-05-13 12:31:33.467744'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.467744', '2022-05-13 12:31:33.467744')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.521681', '2022-05-13 12:31:33.521681', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.521681', '2022-05-13 12:31:33.521681', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.521794', '2022-05-13 12:31:33.521794'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.521794', '2022-05-13 12:31:33.521794');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.521843', '2022-05-13 12:31:33.521843');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.522002', '2022-05-13 12:31:33.522002'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.522002', '2022-05-13 12:31:33.522002')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.576037', '2022-05-13 12:31:33.576037', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.576037', '2022-05-13 12:31:33.576037', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.576142', '2022-05-13 12:31:33.576142'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.576142', '2022-05-13 12:31:33.576142');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.576187', '2022-05-13 12:31:33.576187');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.576350', '2022-05-13 12:31:33.576350'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.576350', '2022-05-13 12:31:33.576350')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.622431', '2022-05-13 12:31:33.622431', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.622431', '2022-05-13 12:31:33.622431', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.622540', '2022-05-13 12:31:33.622540'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.622540', '2022-05-13 12:31:33.622540');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.622589', '2022-05-13 12:31:33.622589');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.622739', '2022-05-13 12:31:33.622739'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.622739', '2022-05-13 12:31:33.622739')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.676254', '2022-05-13 12:31:33.676254', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.676254', '2022-05-13 12:31:33.676254', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.676369', '2022-05-13 12:31:33.676369'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.676369', '2022-05-13 12:31:33.676369');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.676421', '2022-05-13 12:31:33.676421');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.677018', '2022-05-13 12:31:33.677018'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.677018', '2022-05-13 12:31:33.677018')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.728561', '2022-05-13 12:31:33.728561', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.728561', '2022-05-13 12:31:33.728561', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.728676', '2022-05-13 12:31:33.728676'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.728676', '2022-05-13 12:31:33.728676');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.728727', '2022-05-13 12:31:33.728727');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.728905', '2022-05-13 12:31:33.728905'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.728905', '2022-05-13 12:31:33.728905')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.781069', '2022-05-13 12:31:33.781069', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.781069', '2022-05-13 12:31:33.781069', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.781175', '2022-05-13 12:31:33.781175'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.781175', '2022-05-13 12:31:33.781175');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.781230', '2022-05-13 12:31:33.781230');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.781384', '2022-05-13 12:31:33.781384'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.781384', '2022-05-13 12:31:33.781384')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.833565', '2022-05-13 12:31:33.833565', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.833565', '2022-05-13 12:31:33.833565', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.833741', '2022-05-13 12:31:33.833741'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.833741', '2022-05-13 12:31:33.833741');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.833840', '2022-05-13 12:31:33.833840');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.834095', '2022-05-13 12:31:33.834095'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.834095', '2022-05-13 12:31:33.834095')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.884273', '2022-05-13 12:31:33.884273', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.884273', '2022-05-13 12:31:33.884273', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.884393', '2022-05-13 12:31:33.884393'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.884393', '2022-05-13 12:31:33.884393');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.884445', '2022-05-13 12:31:33.884445');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.884597', '2022-05-13 12:31:33.884597'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.884597', '2022-05-13 12:31:33.884597')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.937039', '2022-05-13 12:31:33.937039', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.937039', '2022-05-13 12:31:33.937039', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.937144', '2022-05-13 12:31:33.937144'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.937144', '2022-05-13 12:31:33.937144');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.937192', '2022-05-13 12:31:33.937192');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.937333', '2022-05-13 12:31:33.937333'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.937333', '2022-05-13 12:31:33.937333')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:33.988663', '2022-05-13 12:31:33.988663', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:33.988663', '2022-05-13 12:31:33.988663', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.988780', '2022-05-13 12:31:33.988780'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.988780', '2022-05-13 12:31:33.988780');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:33.988831', '2022-05-13 12:31:33.988831');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.988989', '2022-05-13 12:31:33.988989'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:33.988989', '2022-05-13 12:31:33.988989')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:34.041244', '2022-05-13 12:31:34.041244', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:34.041244', '2022-05-13 12:31:34.041244', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.041353', '2022-05-13 12:31:34.041353'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.041353', '2022-05-13 12:31:34.041353');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.041402', '2022-05-13 12:31:34.041402');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.041556', '2022-05-13 12:31:34.041556'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.041556', '2022-05-13 12:31:34.041556')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:34.094232', '2022-05-13 12:31:34.094232', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:34.094232', '2022-05-13 12:31:34.094232', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.094346', '2022-05-13 12:31:34.094346'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.094346', '2022-05-13 12:31:34.094346');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.094397', '2022-05-13 12:31:34.094397');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.094573', '2022-05-13 12:31:34.094573'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.094573', '2022-05-13 12:31:34.094573')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:34.143117', '2022-05-13 12:31:34.143117', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:34.143117', '2022-05-13 12:31:34.143117', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.143231', '2022-05-13 12:31:34.143231'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.143231', '2022-05-13 12:31:34.143231');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.143282', '2022-05-13 12:31:34.143282');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.143449', '2022-05-13 12:31:34.143449'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.143449', '2022-05-13 12:31:34.143449')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:34.191536', '2022-05-13 12:31:34.191536', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:34.191536', '2022-05-13 12:31:34.191536', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.191639', '2022-05-13 12:31:34.191639'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.191639', '2022-05-13 12:31:34.191639');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.191683', '2022-05-13 12:31:34.191683');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.191826', '2022-05-13 12:31:34.191826'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.191826', '2022-05-13 12:31:34.191826')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:34.247488', '2022-05-13 12:31:34.247488', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:34.247488', '2022-05-13 12:31:34.247488', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.247597', '2022-05-13 12:31:34.247597'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.247597', '2022-05-13 12:31:34.247597');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.247644', '2022-05-13 12:31:34.247644');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.247802', '2022-05-13 12:31:34.247802'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.247802', '2022-05-13 12:31:34.247802')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:34.310288', '2022-05-13 12:31:34.310288', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:34.310288', '2022-05-13 12:31:34.310288', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.310412', '2022-05-13 12:31:34.310412'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.310412', '2022-05-13 12:31:34.310412');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.310464', '2022-05-13 12:31:34.310464');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.310611', '2022-05-13 12:31:34.310611'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.310611', '2022-05-13 12:31:34.310611')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "disburses" ("id", "init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES (980190962, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 980190962, '2022-05-13 12:31:34.361113', '2022-05-13 12:31:34.361113', DEFAULT), (298486374, '2022-05-12 17:35:58', '2022-05-12 17:35:58', 1, 9.99, 298486374, '2022-05-13 12:31:34.361113', '2022-05-13 12:31:34.361113', DEFAULT);
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.361210', '2022-05-13 12:31:34.361210'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.361210', '2022-05-13 12:31:34.361210');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:31:34.361254', '2022-05-13 12:31:34.361254');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.361399', '2022-05-13 12:31:34.361399'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:31:34.361399', '2022-05-13 12:31:34.361399')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:33:13.176713', '2022-05-13 12:33:13.176713'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:33:13.176713', '2022-05-13 12:33:13.176713');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:33:13.187806', '2022-05-13 12:33:13.187806');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:33:13.196497', '2022-05-13 12:33:13.196497'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:33:13.196497', '2022-05-13 12:33:13.196497')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
DisbursesControllerTest: test_should_create_disburse
----------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
DisbursesControllerTest: test_should_destroy_disburse
-----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
DisbursesControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
DisbursesControllerTest: test_should_update_disburse
----------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
DisbursesControllerTest: test_should_show_disburse
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
MerchantsControllerTest: test_should_create_merchant
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
MerchantsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MerchantsControllerTest: test_should_destroy_merchant
-----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
MerchantsControllerTest: test_should_update_merchant
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
MerchantsControllerTest: test_should_show_merchant
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
ShoppersControllerTest: test_should_destroy_shopper
---------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShoppersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
ShoppersControllerTest: test_should_show_shopper
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ShoppersControllerTest: test_should_update_shopper
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ShoppersControllerTest: test_should_create_shopper
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:38:17.305030', '2022-05-13 12:38:17.305030'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:38:17.305030', '2022-05-13 12:38:17.305030');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:38:17.316099', '2022-05-13 12:38:17.316099');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:38:17.325153', '2022-05-13 12:38:17.325153'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:38:17.325153', '2022-05-13 12:38:17.325153')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
DisbursesControllerTest: test_should_create_disburse
----------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
DisbursesControllerTest: test_should_destroy_disburse
-----------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
DisbursesControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
DisbursesControllerTest: test_should_show_disburse
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
DisbursesControllerTest: test_should_update_disburse
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MerchantsControllerTest: test_should_destroy_merchant
-----------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
MerchantsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
MerchantsControllerTest: test_should_show_merchant
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
MerchantsControllerTest: test_should_update_merchant
----------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
MerchantsControllerTest: test_should_create_merchant
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ShoppersControllerTest: test_should_update_shopper
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
ShoppersControllerTest: test_should_show_shopper
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShoppersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ShoppersControllerTest: test_should_create_shopper
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
ShoppersControllerTest: test_should_destroy_shopper
---------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:40:02.234178', '2022-05-13 12:40:02.234178'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:40:02.234178', '2022-05-13 12:40:02.234178');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:40:02.245401', '2022-05-13 12:40:02.245401');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:40:02.254294', '2022-05-13 12:40:02.254294'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:40:02.254294', '2022-05-13 12:40:02.254294')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
ShoppersControllerTest: test_should_destroy_shopper
---------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
ShoppersControllerTest: test_should_show_shopper
------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShoppersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ShoppersControllerTest: test_should_create_shopper
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ShoppersControllerTest: test_should_update_shopper
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
MerchantsControllerTest: test_should_create_merchant
----------------------------------------------------
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
MerchantsControllerTest: test_should_destroy_merchant
-----------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
MerchantsControllerTest: test_should_show_merchant
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
MerchantsControllerTest: test_should_update_merchant
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
MerchantsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
DisbursesControllerTest: test_should_create_disburse
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
DisbursesControllerTest: test_should_destroy_disburse
-----------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
DisbursesControllerTest: test_should_show_disburse
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
DisbursesControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
DisbursesControllerTest: test_should_update_disburse
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 845309360], ["LIMIT", 1]]
  [1m[36mOrder Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
OrdersControllerTest - test_should_destroy_order: NoMethodError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `assert_difference`) can be used, as long as `assert_raises` is inside their block.

  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 845309360], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 845309360], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 845309360], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 845309360], ["LIMIT", 1]]
  [1m[36mOrder Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
OrdersControllerTest - test_should_create_order: NameError raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `assert_difference`) can be used, as long as `assert_raises` is inside their block.

  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:45:22.155664', '2022-05-13 12:45:22.155664'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:45:22.155664', '2022-05-13 12:45:22.155664');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:45:22.166977', '2022-05-13 12:45:22.166977');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:45:22.175960', '2022-05-13 12:45:22.175960'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:45:22.175960', '2022-05-13 12:45:22.175960')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:47:06.215496', '2022-05-13 12:47:06.215496'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:47:06.215496', '2022-05-13 12:47:06.215496');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:47:06.226986', '2022-05-13 12:47:06.226986');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:47:06.235993', '2022-05-13 12:47:06.235993'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:47:06.235993', '2022-05-13 12:47:06.235993')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:20.919540', '2022-05-13 12:54:20.919540'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:20.919540', '2022-05-13 12:54:20.919540');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:54:20.930615', '2022-05-13 12:54:20.930615');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:20.938885', '2022-05-13 12:54:20.938885'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:20.938885', '2022-05-13 12:54:20.938885')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:59.094906', '2022-05-13 12:54:59.094906'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:59.094906', '2022-05-13 12:54:59.094906');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 12:54:59.106462', '2022-05-13 12:54:59.106462');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:59.114735', '2022-05-13 12:54:59.114735'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 12:54:59.114735', '2022-05-13 12:54:59.114735')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 13:01:35.707691', '2022-05-13 13:01:35.707691'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 13:01:35.707691', '2022-05-13 13:01:35.707691');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:01:35.718410', '2022-05-13 13:01:35.718410');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 13:01:35.727460', '2022-05-13 13:01:35.727460'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 13:01:35.727460', '2022-05-13 13:01:35.727460')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 13:05:36.673244', '2022-05-13 13:05:36.673244'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 13:05:36.673244', '2022-05-13 13:05:36.673244');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:05:36.683856', '2022-05-13 13:05:36.683856');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 13:05:36.693540', '2022-05-13 13:05:36.693540'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 13:05:36.693540', '2022-05-13 13:05:36.693540')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 13:12:40.148086', '2022-05-13 13:12:40.148086'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 13:12:40.148086', '2022-05-13 13:12:40.148086');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:12:40.158713', '2022-05-13 13:12:40.158713');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 13:12:40.168158', '2022-05-13 13:12:40.168158'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 13:12:40.168158', '2022-05-13 13:12:40.168158')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "351.97"], ["merchant_id", 5506866], ["created_at", "2022-05-13 13:12:40.285363"], ["updated_at", "2022-05-13 13:12:40.285363"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1140.22"], ["merchant_id", 425547414], ["created_at", "2022-05-13 13:12:40.294338"], ["updated_at", "2022-05-13 13:12:40.294338"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 13:13:07.247892', '2022-05-13 13:13:07.247892'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 13:13:07.247892', '2022-05-13 13:13:07.247892');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:13:07.258649', '2022-05-13 13:13:07.258649');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 13:13:07.267666', '2022-05-13 13:13:07.267666'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 13:13:07.267666', '2022-05-13 13:13:07.267666')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.1ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "351.97"], ["merchant_id", 5506866], ["created_at", "2022-05-13 13:13:07.389545"], ["updated_at", "2022-05-13 13:13:07.389545"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1140.22"], ["merchant_id", 425547414], ["created_at", "2022-05-13 13:13:07.398429"], ["updated_at", "2022-05-13 13:13:07.398429"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'MyString', 'MyString', 'MyString', '2022-05-13 13:31:28.913410', '2022-05-13 13:31:28.913410'), (425547414, 'MyString', 'MyString', 'MyString', '2022-05-13 13:31:28.913410', '2022-05-13 13:31:28.913410');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:31:28.924106', '2022-05-13 13:31:28.924106');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'MyString', 'MyString', 'MyString', '2022-05-13 13:31:28.932756', '2022-05-13 13:31:28.932756'), (219965772, 'MyString', 'MyString', 'MyString', '2022-05-13 13:31:28.932756', '2022-05-13 13:31:28.932756')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.0ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "351.97"], ["merchant_id", 5506866], ["created_at", "2022-05-13 13:31:29.054247"], ["updated_at", "2022-05-13 13:31:29.054247"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1140.22"], ["merchant_id", 425547414], ["created_at", "2022-05-13 13:31:29.062555"], ["updated_at", "2022-05-13 13:31:29.062555"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.407861', '2022-05-13 13:33:52.407861'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.407861', '2022-05-13 13:33:52.407861');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.418924', '2022-05-13 13:33:52.418924');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.427899', '2022-05-13 13:33:52.427899'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.427899', '2022-05-13 13:33:52.427899')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.504083', '2022-05-13 13:33:52.504083'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.504083', '2022-05-13 13:33:52.504083');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.504142', '2022-05-13 13:33:52.504142');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.504702', '2022-05-13 13:33:52.504702'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.504702', '2022-05-13 13:33:52.504702')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.554356', '2022-05-13 13:33:52.554356'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.554356', '2022-05-13 13:33:52.554356');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.554430', '2022-05-13 13:33:52.554430');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.554585', '2022-05-13 13:33:52.554585'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.554585', '2022-05-13 13:33:52.554585')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.608634', '2022-05-13 13:33:52.608634'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.608634', '2022-05-13 13:33:52.608634');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:33:52.608700', '2022-05-13 13:33:52.608700');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.608963', '2022-05-13 13:33:52.608963'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:33:52.608963', '2022-05-13 13:33:52.608963')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:38:54.101654', '2022-05-13 13:38:54.101654'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:38:54.101654', '2022-05-13 13:38:54.101654');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.112674', '2022-05-13 13:38:54.112674');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.121069', '2022-05-13 13:38:54.121069'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.121069', '2022-05-13 13:38:54.121069')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:38:54.198664', '2022-05-13 13:38:54.198664'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:38:54.198664', '2022-05-13 13:38:54.198664');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.198738', '2022-05-13 13:38:54.198738');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.198932', '2022-05-13 13:38:54.198932'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.198932', '2022-05-13 13:38:54.198932')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:38:54.254097', '2022-05-13 13:38:54.254097'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:38:54.254097', '2022-05-13 13:38:54.254097');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.254169', '2022-05-13 13:38:54.254169');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.254359', '2022-05-13 13:38:54.254359'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.254359', '2022-05-13 13:38:54.254359')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:38:54.307563', '2022-05-13 13:38:54.307563'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:38:54.307563', '2022-05-13 13:38:54.307563');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:38:54.307638', '2022-05-13 13:38:54.307638');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.307882', '2022-05-13 13:38:54.307882'), (2, 'MyString', 'MyString', 'MyString', '2022-05-13 13:38:54.307882', '2022-05-13 13:38:54.307882')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:40:39.762116', '2022-05-13 13:40:39.762116'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:40:39.762116', '2022-05-13 13:40:39.762116');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.772572', '2022-05-13 13:40:39.772572');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 13:40:39.781448', '2022-05-13 13:40:39.781448'), (2, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 13:40:39.781448', '2022-05-13 13:40:39.781448')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:40:39.857738', '2022-05-13 13:40:39.857738'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:40:39.857738', '2022-05-13 13:40:39.857738');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.857824', '2022-05-13 13:40:39.857824');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 13:40:39.857990', '2022-05-13 13:40:39.857990'), (2, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 13:40:39.857990', '2022-05-13 13:40:39.857990')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:40:39.910269', '2022-05-13 13:40:39.910269'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:40:39.910269', '2022-05-13 13:40:39.910269');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:40:39.910350', '2022-05-13 13:40:39.910350');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (1, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 13:40:39.910586', '2022-05-13 13:40:39.910586'), (2, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 13:40:39.910586', '2022-05-13 13:40:39.910586')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:42:02.920876', '2022-05-13 13:42:02.920876'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:42:02.920876', '2022-05-13 13:42:02.920876');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:42:02.932551', '2022-05-13 13:42:02.932551');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 13:42:02.941919', '2022-05-13 13:42:02.941919'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 13:42:02.941919', '2022-05-13 13:42:02.941919')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.7ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.1ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "351.97"], ["merchant_id", 5506866], ["created_at", "2022-05-13 13:42:03.063620"], ["updated_at", "2022-05-13 13:42:03.063620"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1140.22"], ["merchant_id", 425547414], ["created_at", "2022-05-13 13:42:03.071509"], ["updated_at", "2022-05-13 13:42:03.071509"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:44:31.279775', '2022-05-13 13:44:31.279775'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:44:31.279775', '2022-05-13 13:44:31.279775');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:44:31.290493', '2022-05-13 13:44:31.290493');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 13:44:31.299700', '2022-05-13 13:44:31.299700'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 13:44:31.299700', '2022-05-13 13:44:31.299700')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.0ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "351.97"], ["merchant_id", 5506866], ["created_at", "2022-05-13 13:44:31.416515"], ["updated_at", "2022-05-13 13:44:31.416515"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1140.22"], ["merchant_id", 425547414], ["created_at", "2022-05-13 13:44:31.425388"], ["updated_at", "2022-05-13 13:44:31.425388"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 13:47:54.827377', '2022-05-13 13:47:54.827377'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 13:47:54.827377', '2022-05-13 13:47:54.827377');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 13:47:54.839084', '2022-05-13 13:47:54.839084');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 13:47:54.848527', '2022-05-13 13:47:54.848527'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 13:47:54.848527', '2022-05-13 13:47:54.848527')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "351.97"], ["merchant_id", 5506866], ["created_at", "2022-05-13 13:47:54.965973"], ["updated_at", "2022-05-13 13:47:54.965973"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1140.22"], ["merchant_id", 425547414], ["created_at", "2022-05-13 13:47:54.974981"], ["updated_at", "2022-05-13 13:47:54.974981"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mDisburse Load (3.1ms)[0m  [1m[34mSELECT "disburses".* FROM "disburses"[0m
  [1m[36mShopper Load (2.2ms)[0m  [1m[34mSELECT "shoppers".* FROM "shoppers"[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:02:05.344406', '2022-05-13 14:02:05.344406'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:02:05.344406', '2022-05-13 14:02:05.344406');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:02:05.355617', '2022-05-13 14:02:05.355617');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:02:05.364595', '2022-05-13 14:02:05.364595'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:02:05.364595', '2022-05-13 14:02:05.364595')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "351.97"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:02:05.485546"], ["updated_at", "2022-05-13 14:02:05.485546"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1140.22"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:02:05.492490"], ["updated_at", "2022-05-13 14:02:05.492490"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:08:06.849976', '2022-05-13 14:08:06.849976'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:08:06.849976', '2022-05-13 14:08:06.849976');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 425547414, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:08:06.861018', '2022-05-13 14:08:06.861018');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:08:06.870899', '2022-05-13 14:08:06.870899'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:08:06.870899', '2022-05-13 14:08:06.870899')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "354.99"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:08:06.994706"], ["updated_at", "2022-05-13 14:08:06.994706"], ["feed", "3.02"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "1149.99"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:08:07.001932"], ["updated_at", "2022-05-13 14:08:07.001932"], ["feed", "9.77"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:11:18.064620', '2022-05-13 14:11:18.064620'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:11:18.064620', '2022-05-13 14:11:18.064620');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868'), (197057803, 1000.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:11:18.074868', '2022-05-13 14:11:18.074868');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:11:18.082844', '2022-05-13 14:11:18.082844'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:11:18.082844', '2022-05-13 14:11:18.082844')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.6ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "404.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:11:18.199789"], ["updated_at", "2022-05-13 14:11:18.199789"], ["feed", "3.44"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "1100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:11:18.206681"], ["updated_at", "2022-05-13 14:11:18.206681"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:12:51.119691', '2022-05-13 14:12:51.119691'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:12:51.119691', '2022-05-13 14:12:51.119691');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:12:51.131390', '2022-05-13 14:12:51.131390');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:12:51.140220', '2022-05-13 14:12:51.140220'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:12:51.140220', '2022-05-13 14:12:51.140220')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-17"], ["completed_at", "2022-04-24"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-08"], ["completed_at", "2022-05-15"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "404.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:12:51.268641"], ["updated_at", "2022-05-13 14:12:51.268641"], ["feed", "3.44"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 1], ["amount", "100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:12:51.275646"], ["updated_at", "2022-05-13 14:12:51.275646"], ["feed", "0.85"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:16:43.577936', '2022-05-13 14:16:43.577936'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:16:43.577936', '2022-05-13 14:16:43.577936');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:16:43.588382', '2022-05-13 14:16:43.588382');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:16:43.596691', '2022-05-13 14:16:43.596691'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:16:43.596691', '2022-05-13 14:16:43.596691')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-08' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at BETWEEN '2022-05-08' AND '2022-05-15') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 3], ["amount", "404.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:16:43.719406"], ["updated_at", "2022-05-13 14:16:43.719406"], ["feed", "3.44"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.5ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-08 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 1], ["amount", "100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:16:43.726111"], ["updated_at", "2022-05-13 14:16:43.726111"], ["feed", "0.85"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-17' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at BETWEEN '2022-04-17' AND '2022-04-24') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:23:46.072354', '2022-05-13 14:23:46.072354'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:23:46.072354', '2022-05-13 14:23:46.072354');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:23:46.084525', '2022-05-13 14:23:46.084525');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:23:46.093545', '2022-05-13 14:23:46.093545'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:23:46.093545', '2022-05-13 14:23:46.093545')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at BETWEEN '2022-05-09' AND '2022-05-15') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "349.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:23:46.261315"], ["updated_at", "2022-05-13 14:23:46.261315"], ["feed", "2.97"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 1], ["amount", "100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:23:46.268360"], ["updated_at", "2022-05-13 14:23:46.268360"], ["feed", "0.85"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:29:23.520203', '2022-05-13 14:29:23.520203'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:29:23.520203', '2022-05-13 14:29:23.520203');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:29:23.532202', '2022-05-13 14:29:23.532202');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:29:23.541028', '2022-05-13 14:29:23.541028'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:29:23.541028', '2022-05-13 14:29:23.541028')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at BETWEEN '2022-05-09' AND '2022-05-15') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "349.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:29:23.654901"], ["updated_at", "2022-05-13 14:29:23.654901"], ["feed", "2.97"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 1], ["amount", "100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:29:23.661353"], ["updated_at", "2022-05-13 14:29:23.661353"], ["feed", "0.85"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:33:11.713650', '2022-05-13 14:33:11.713650'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:33:11.713650', '2022-05-13 14:33:11.713650');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:33:11.724886', '2022-05-13 14:33:11.724886');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:33:11.733734', '2022-05-13 14:33:11.733734'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:33:11.733734', '2022-05-13 14:33:11.733734')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at BETWEEN '2022-04-18' AND '2022-04-24') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at BETWEEN '2022-05-09' AND '2022-05-15') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "349.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:33:11.867343"], ["updated_at", "2022-05-13 14:33:11.867343"], ["feed", "2.97"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 1], ["amount", "100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:33:11.874543"], ["updated_at", "2022-05-13 14:33:11.874543"], ["feed", "0.85"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:35:15.369584', '2022-05-13 14:35:15.369584'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:35:15.369584', '2022-05-13 14:35:15.369584');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:35:15.380203', '2022-05-13 14:35:15.380203');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:35:15.388034', '2022-05-13 14:35:15.388034'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:35:15.388034', '2022-05-13 14:35:15.388034')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09' and completed_at <= '2022-05-15') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "349.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:35:15.502678"], ["updated_at", "2022-05-13 14:35:15.502678"], ["feed", "2.97"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 1], ["amount", "100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:35:15.509787"], ["updated_at", "2022-05-13 14:35:15.509787"], ["feed", "0.85"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18' and completed_at <= '2022-04-24') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:45:45.539747', '2022-05-13 14:45:45.539747'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:45:45.539747', '2022-05-13 14:45:45.539747');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:45:45.550508', '2022-05-13 14:45:45.550508');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:45:45.559051', '2022-05-13 14:45:45.559051'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:45:45.559051', '2022-05-13 14:45:45.559051')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09' and end_date ='2022-05-15') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09' and completed_at <= '2022-05-15') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.5ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 2], ["amount", "349.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 14:45:45.674995"], ["updated_at", "2022-05-13 14:45:45.674995"], ["feed", "2.97"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 00:00:00"], ["orders", 1], ["amount", "100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 14:45:45.681802"], ["updated_at", "2022-05-13 14:45:45.681802"], ["feed", "0.85"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18' and end_date ='2022-04-24') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18' and completed_at <= '2022-04-24') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mOrder Load (3.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 14:57:17.060833', '2022-05-13 14:57:17.060833'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 14:57:17.060833', '2022-05-13 14:57:17.060833');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 14:57:17.070981', '2022-05-13 14:57:17.070981');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 14:57:17.079769', '2022-05-13 14:57:17.079769'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 14:57:17.079769', '2022-05-13 14:57:17.079769')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (3.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.6ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:00:54.167246', '2022-05-13 15:00:54.167246'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:00:54.167246', '2022-05-13 15:00:54.167246');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:00:54.178757', '2022-05-13 15:00:54.178757');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:00:54.187065', '2022-05-13 15:00:54.187065'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:00:54.187065', '2022-05-13 15:00:54.187065')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:07:06.227626', '2022-05-13 15:07:06.227626'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:07:06.227626', '2022-05-13 15:07:06.227626');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:07:06.238121', '2022-05-13 15:07:06.238121');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:07:06.246916', '2022-05-13 15:07:06.246916'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:07:06.246916', '2022-05-13 15:07:06.246916')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:10:46.305265', '2022-05-13 15:10:46.305265'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:10:46.305265', '2022-05-13 15:10:46.305265');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:10:46.316964', '2022-05-13 15:10:46.316964');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:10:46.325467', '2022-05-13 15:10:46.325467'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:10:46.325467', '2022-05-13 15:10:46.325467')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mMerchant Load (2.2ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants"[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Pluck (2.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.2ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:21:09.367440', '2022-05-13 15:21:09.367440'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:21:09.367440', '2022-05-13 15:21:09.367440');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:21:09.378313', '2022-05-13 15:21:09.378313');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:21:09.387464', '2022-05-13 15:21:09.387464'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:21:09.387464', '2022-05-13 15:21:09.387464')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:21:40.568052', '2022-05-13 15:21:40.568052'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:21:40.568052', '2022-05-13 15:21:40.568052');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:21:40.579323', '2022-05-13 15:21:40.579323');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:21:40.588125', '2022-05-13 15:21:40.588125'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:21:40.588125', '2022-05-13 15:21:40.588125')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.4ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:22:44.746907', '2022-05-13 15:22:44.746907'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:22:44.746907', '2022-05-13 15:22:44.746907');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:22:44.758096', '2022-05-13 15:22:44.758096');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:22:44.766655', '2022-05-13 15:22:44.766655'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:22:44.766655', '2022-05-13 15:22:44.766655')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:32:45.209779', '2022-05-13 15:32:45.209779'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:32:45.209779', '2022-05-13 15:32:45.209779');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:32:45.220968', '2022-05-13 15:32:45.220968');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:32:45.229735', '2022-05-13 15:32:45.229735'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:32:45.229735', '2022-05-13 15:32:45.229735')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09 00:00:00' and completed_at <= '2022-05-15 23:59:59') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 3], ["amount", "749.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 15:32:45.359494"], ["updated_at", "2022-05-13 15:32:45.359494"], ["feed", "6.37"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 15:32:45.366741"], ["updated_at", "2022-05-13 15:32:45.366741"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:34:34.086763', '2022-05-13 15:34:34.086763'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:34:34.086763', '2022-05-13 15:34:34.086763');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:34:34.097548', '2022-05-13 15:34:34.097548');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:34:34.106248', '2022-05-13 15:34:34.106248'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:34:34.106248', '2022-05-13 15:34:34.106248')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09 00:00:00' and completed_at <= '2022-05-15 23:59:59') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 3], ["amount", "749.98"], ["merchant_id", 5506866], ["created_at", "2022-05-13 15:34:34.231231"], ["updated_at", "2022-05-13 15:34:34.231231"], ["feed", "6.37"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1100.0"], ["merchant_id", 425547414], ["created_at", "2022-05-13 15:34:34.238785"], ["updated_at", "2022-05-13 15:34:34.238785"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.7ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:36:05.394186', '2022-05-13 15:36:05.394186'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:36:05.394186', '2022-05-13 15:36:05.394186');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:36:05.404227', '2022-05-13 15:36:05.404227');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:36:05.413377', '2022-05-13 15:36:05.413377'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:36:05.413377', '2022-05-13 15:36:05.413377')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09 00:00:00' and completed_at <= '2022-05-15 23:59:59') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.5ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 3], ["amount", "743.61"], ["merchant_id", 5506866], ["created_at", "2022-05-13 15:36:05.529405"], ["updated_at", "2022-05-13 15:36:05.529405"], ["feed", "6.37"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.3ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 15:36:05.535798"], ["updated_at", "2022-05-13 15:36:05.535798"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.7ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:39:34.618303', '2022-05-13 15:39:34.618303'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:39:34.618303', '2022-05-13 15:39:34.618303');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333'), (728445976, 55.0, '2022-05-08 16:53:28', 219965772, 5506866, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:39:34.630333', '2022-05-13 15:39:34.630333');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:39:34.638647', '2022-05-13 15:39:34.638647'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:39:34.638647', '2022-05-13 15:39:34.638647')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09 00:00:00' and completed_at <= '2022-05-15 23:59:59') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 3], ["amount", "743.61"], ["merchant_id", 5506866], ["created_at", "2022-05-13 15:39:34.762916"], ["updated_at", "2022-05-13 15:39:34.762916"], ["feed", "6.37"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 15:39:34.769966"], ["updated_at", "2022-05-13 15:39:34.769966"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.7ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.8ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:47:14.488101', '2022-05-13 15:47:14.488101'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:47:14.488101', '2022-05-13 15:47:14.488101');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332'), (728445976, 55.0, '2022-05-09 16:53:28', 219965772, 5506866, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:47:14.499332', '2022-05-13 15:47:14.499332');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:47:14.508287', '2022-05-13 15:47:14.508287'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:47:14.508287', '2022-05-13 15:47:14.508287')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09 00:00:00' and completed_at <= '2022-05-15 23:59:59') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 4], ["amount", "798.14"], ["merchant_id", 5506866], ["created_at", "2022-05-13 15:47:14.635872"], ["updated_at", "2022-05-13 15:47:14.635872"], ["feed", "6.84"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.6ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 15:47:14.643772"], ["updated_at", "2022-05-13 15:47:14.643772"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.1ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 15:50:18.385905', '2022-05-13 15:50:18.385905'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 15:50:18.385905', '2022-05-13 15:50:18.385905');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587'), (728445976, 55.0, '2022-05-09 16:53:28', 219965772, 5506866, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 15:50:18.396587', '2022-05-13 15:50:18.396587');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 15:50:18.405374', '2022-05-13 15:50:18.405374'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 15:50:18.405374', '2022-05-13 15:50:18.405374')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09 00:00:00' and completed_at <= '2022-05-15 23:59:59') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 4], ["amount", "798.14"], ["merchant_id", 5506866], ["created_at", "2022-05-13 15:50:18.534953"], ["updated_at", "2022-05-13 15:50:18.534953"], ["feed", "6.84"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.5ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.8ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 15:50:18.542248"], ["updated_at", "2022-05-13 15:50:18.542248"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (3.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (3.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 19:07:27.070710', '2022-05-13 19:07:27.070710'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 19:07:27.070710', '2022-05-13 19:07:27.070710');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159'), (728445976, 55.0, '2022-05-09 16:53:28', 219965772, 5506866, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 19:07:27.085159', '2022-05-13 19:07:27.085159');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 19:07:27.094239', '2022-05-13 19:07:27.094239'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 19:07:27.094239', '2022-05-13 19:07:27.094239')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (39.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-05-09 00:00:00' and completed_at <= '2022-05-15 23:59:59') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (2.4ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 4], ["amount", "798.14"], ["merchant_id", 5506866], ["created_at", "2022-05-13 19:07:27.329674"], ["updated_at", "2022-05-13 19:07:27.329674"], ["feed", "6.84"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 19:07:27.337810"], ["updated_at", "2022-05-13 19:07:27.337810"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.3ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE (completed_at >= '2022-04-18 00:00:00' and completed_at <= '2022-04-24 00:00:00') ORDER BY "orders"."merchant_id" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.0ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 19:08:10.697012', '2022-05-13 19:08:10.697012'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 19:08:10.697012', '2022-05-13 19:08:10.697012');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083'), (728445976, 55.0, '2022-05-09 16:53:28', 219965772, 5506866, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 19:08:10.707083', '2022-05-13 19:08:10.707083');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 19:08:10.716078', '2022-05-13 19:08:10.716078'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 19:08:10.716078', '2022-05-13 19:08:10.716078')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-09 00:00:00"], ["completed_at", "2022-05-15 23:59:59"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.6ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 4], ["amount", "798.14"], ["merchant_id", 5506866], ["created_at", "2022-05-13 19:08:10.828568"], ["updated_at", "2022-05-13 19:08:10.828568"], ["feed", "6.84"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 19:08:10.835527"], ["updated_at", "2022-05-13 19:08:10.835527"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-18 00:00:00"], ["completed_at", "2022-04-24 00:00:00"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.5ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 20:01:56.688863', '2022-05-13 20:01:56.688863'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 20:01:56.688863', '2022-05-13 20:01:56.688863');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880'), (728445976, 55.0, '2022-05-09 16:53:28', 219965772, 5506866, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 20:01:56.700880', '2022-05-13 20:01:56.700880');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 20:01:56.712465', '2022-05-13 20:01:56.712465'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 20:01:56.712465', '2022-05-13 20:01:56.712465')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 20:02:54.828792', '2022-05-13 20:02:54.828792'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 20:02:54.828792', '2022-05-13 20:02:54.828792');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385'), (728445976, 55.0, '2022-05-09 16:53:28', 219965772, 5506866, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 20:02:54.842385', '2022-05-13 20:02:54.842385');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 20:02:54.853196', '2022-05-13 20:02:54.853196'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 20:02:54.853196', '2022-05-13 20:02:54.853196')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-09 00:00:00"], ["completed_at", "2022-05-15 23:59:59"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.9ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 4], ["amount", "798.14"], ["merchant_id", 5506866], ["created_at", "2022-05-13 20:02:55.034909"], ["updated_at", "2022-05-13 20:02:55.034909"], ["feed", "6.84"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.3ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 20:02:55.041872"], ["updated_at", "2022-05-13 20:02:55.041872"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-18 00:00:00"], ["completed_at", "2022-04-24 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "merchants" DISABLE TRIGGER ALL;ALTER TABLE "disburses" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "shoppers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[31mDELETE FROM "disburses";
DELETE FROM "merchants";
DELETE FROM "orders";
DELETE FROM "shoppers";
INSERT INTO "merchants" ("id", "name", "email", "cif", "created_at", "updated_at") VALUES (5506866, 'Sorocaba Phones', 'MyString', 'MyString', '2022-05-13 20:15:18.781743', '2022-05-13 20:15:18.781743'), (425547414, 'Elisa Shoes', 'MyString', 'MyString', '2022-05-13 20:15:18.781743', '2022-05-13 20:15:18.781743');
INSERT INTO "orders" ("id", "amount", "completed_at", "shopper_id", "merchant_id", "created_at", "updated_at") VALUES (845309360, 49.99, '2022-05-12 16:53:28', 336935152, 5506866, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024'), (728445976, 55.0, '2022-05-09 16:53:28', 219965772, 5506866, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024'), (476841089, 299.99, '2022-05-10 16:53:28', 336935152, 5506866, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024'), (34115876, 400.0, '2022-05-15 16:53:28', 336935152, 5506866, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024'), (890216887, 100.0, '2022-04-15 16:53:28', 336935152, 5506866, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024'), (738652175, 1500.0, NULL, 219965772, 5506866, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024'), (453099672, 100.0, '2022-05-13 16:53:28', 336935152, 425547414, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024'), (197057803, 1000.0, '2022-05-15 16:53:28', 336935152, 425547414, '2022-05-13 20:15:18.793024', '2022-05-13 20:15:18.793024');
INSERT INTO "shoppers" ("id", "name", "email", "nif", "created_at", "updated_at") VALUES (336935152, 'Peter Parra', 'MyString', 'MyString', '2022-05-13 20:15:18.801793', '2022-05-13 20:15:18.801793'), (219965772, 'Joseph Viera', 'MyString', 'MyString', '2022-05-13 20:15:18.801793', '2022-05-13 20:15:18.801793')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "merchants" ENABLE TRIGGER ALL;ALTER TABLE "disburses" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "shoppers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (19.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I''; ALTER TABLE %I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_week
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates_one_exact_week
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_with_valid_dates_and_orders
--------------------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-05-09 00:00:00' and end_date ='2022-05-15 23:59:59') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-05-09 00:00:00"], ["completed_at", "2022-05-15 23:59:59"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.6ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mDisburse Create (1.7ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 4], ["amount", "798.14"], ["merchant_id", 5506866], ["created_at", "2022-05-13 20:15:18.916733"], ["updated_at", "2022-05-13 20:15:18.916733"], ["feed", "6.84"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mDisburse Create (0.6ms)[0m  [1m[32mINSERT INTO "disburses" ("init_date", "end_date", "orders", "amount", "merchant_id", "created_at", "updated_at", "feed") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["init_date", "2022-05-09 00:00:00"], ["end_date", "2022-05-15 23:59:59"], ["orders", 2], ["amount", "1090.65"], ["merchant_id", 425547414], ["created_at", "2022-05-13 20:15:18.923157"], ["updated_at", "2022-05-13 20:15:18.923157"], ["feed", "9.35"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 5506866], ["LIMIT", 1]]
  [1m[36mMerchant Load (0.4ms)[0m  [1m[34mSELECT "merchants".* FROM "merchants" WHERE "merchants"."id" = $1 LIMIT $2[0m  [["id", 425547414], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_dates
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
DisburseTest: test_calculate_calculate_disbursements_without_orders
-------------------------------------------------------------------
  [1m[36mDisburse Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "disburses" WHERE (init_date ='2022-04-18 00:00:00' and end_date ='2022-04-24 00:00:00') LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."completed_at" BETWEEN $1 AND $2 ORDER BY "orders"."merchant_id" ASC[0m  [["completed_at", "2022-04-18 00:00:00"], ["completed_at", "2022-04-24 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
